<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="662px" preserveAspectRatio="none" style="width:606px;height:662px;background:#EEEEEE;" version="1.1" viewBox="0 0 606 662" width="606px" zoomAndPan="magnify"><defs><filter height="300%" id="fz58v3ahtof9q" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#ADD8E6" height="650.1172" style="stroke:#A80036;stroke-width:1.0;" width="411.5" x="1" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="107" x="153.25" y="18.0669">localhost:8080</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="0" x="209.25" y="33.1997"/><rect fill="#DDDDDD" height="650.1172" style="stroke:#A80036;stroke-width:1.0;" width="113" x="485" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="107" x="488" y="18.0669">localhost:9091</text><rect fill="#FFFFFF" filter="url(#fz58v3ahtof9q)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="37" y="541.5547"/><rect fill="#FFFFFF" filter="url(#fz58v3ahtof9q)" height="58.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="332" y="135.8281"/><rect fill="#FFFFFF" filter="url(#fz58v3ahtof9q)" height="71.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="332" y="266.3594"/><rect fill="#FFFFFF" filter="url(#fz58v3ahtof9q)" height="145.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="332" y="366.7578"/><rect fill="#FFFFFF" filter="url(#fz58v3ahtof9q)" height="58.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="536.5" y="337.625"/><rect fill="#FFFFFF" filter="url(#fz58v3ahtof9q)" height="87.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="536.5" y="512.4219"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="42" x2="42" y1="75.5625" y2="617.8203"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="137" x2="137" y1="75.5625" y2="617.8203"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="336.5" x2="336.5" y1="75.5625" y2="617.8203"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="541.5" x2="541.5" y1="75.5625" y2="617.8203"/><rect fill="#FEFECE" filter="url(#fz58v3ahtof9q)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="70" x="5" y="40.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="12" y="60.2607">browser</text><rect fill="#FEFECE" filter="url(#fz58v3ahtof9q)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="70" x="5" y="616.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="12" y="636.8154">browser</text><rect fill="#FEFECE" filter="url(#fz58v3ahtof9q)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="66" x="102" y="40.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52" x="109" y="60.2607">index.js</text><rect fill="#FEFECE" filter="url(#fz58v3ahtof9q)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="66" x="102" y="616.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52" x="109" y="636.8154">index.js</text><rect fill="#FEFECE" filter="url(#fz58v3ahtof9q)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="139" x="265.5" y="40.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="272.5" y="60.2607">@gots/es-runtime</text><rect fill="#FEFECE" filter="url(#fz58v3ahtof9q)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="139" x="265.5" y="616.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="272.5" y="636.8154">@gots/es-runtime</text><rect fill="#FEFECE" filter="url(#fz58v3ahtof9q)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="82" x="498.5" y="40.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="505.5" y="60.2607">extension</text><rect fill="#FEFECE" filter="url(#fz58v3ahtof9q)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="82" x="498.5" y="616.8203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="505.5" y="636.8154">extension</text><rect fill="#FFFFFF" filter="url(#fz58v3ahtof9q)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="37" y="541.5547"/><rect fill="#FFFFFF" filter="url(#fz58v3ahtof9q)" height="58.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="332" y="135.8281"/><rect fill="#FFFFFF" filter="url(#fz58v3ahtof9q)" height="71.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="332" y="266.3594"/><rect fill="#FFFFFF" filter="url(#fz58v3ahtof9q)" height="145.6641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="332" y="366.7578"/><rect fill="#FFFFFF" filter="url(#fz58v3ahtof9q)" height="58.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="536.5" y="337.625"/><rect fill="#FFFFFF" filter="url(#fz58v3ahtof9q)" height="87.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="536.5" y="512.4219"/><polygon fill="#A80036" points="125,102.6953,135,106.6953,125,110.6953,129,106.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="42" x2="131" y1="106.6953" y2="106.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="49" y="101.6294">"&lt;script/&gt;"</text><polygon fill="#A80036" points="320,131.8281,330,135.8281,320,139.8281,324,135.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="137" x2="326" y1="135.8281" y2="135.8281"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="176" x="144" y="130.7622">api.loadExtension(url)</text><polygon fill="#A80036" points="53,160.9609,43,164.9609,53,168.9609,49,164.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="47" x2="331" y1="164.9609" y2="164.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="59" y="159.895">import(url)</text><polygon fill="#A80036" points="325,190.0938,335,194.0938,325,198.0938,329,194.0938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="42" x2="331" y1="194.0938" y2="194.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="182" x="49" y="189.0278">promise: Promise&lt;module&gt;</text><rect fill="#EEEEEE" filter="url(#fz58v3ahtof9q)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="599" x="0" y="222.6602"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="599" y1="222.6602" y2="222.6602"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="599" y1="225.6602" y2="225.6602"/><rect fill="#EEEEEE" filter="url(#fz58v3ahtof9q)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="185" x="207" y="212.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="166" x="213" y="228.1606">Download extension.js</text><polygon fill="#A80036" points="320,262.3594,330,266.3594,320,270.3594,324,266.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="42" x2="326" y1="266.3594" y2="266.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="49" y="261.2935">promise.resolve(module)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="342" x2="384" y1="295.4922" y2="295.4922"/><line style="stroke:#A80036;stroke-width:1.0;" x1="384" x2="384" y1="295.4922" y2="308.4922"/><line style="stroke:#A80036;stroke-width:1.0;" x1="343" x2="384" y1="308.4922" y2="308.4922"/><polygon fill="#A80036" points="353,304.4922,343,308.4922,353,312.4922,349,308.4922" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171" x="349" y="290.4263">activateExtension(module)</text><polygon fill="#A80036" points="524.5,333.625,534.5,337.625,524.5,341.625,528.5,337.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="337" x2="530.5" y1="337.625" y2="337.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="344" y="332.5591">module.activate(api)</text><polygon fill="#A80036" points="353,362.7578,343,366.7578,353,370.7578,349,366.7578" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="347" x2="535.5" y1="366.7578" y2="366.7578"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="112" x="359" y="361.6919">api.addPanel()</text><polygon fill="#A80036" points="529.5,391.8906,539.5,395.8906,529.5,399.8906,533.5,395.8906" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="342" x2="535.5" y1="395.8906" y2="395.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="153" x="349" y="390.8247">promise: Promise&lt;div&gt;</text><polygon fill="#A80036" points="53,421.0234,43,425.0234,53,429.0234,49,425.0234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="47" x2="331" y1="425.0234" y2="425.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="59" y="419.9575">document.createElement('div')</text><polygon fill="#A80036" points="320,450.1563,330,454.1563,320,458.1563,324,454.1563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="42" x2="326" y1="454.1563" y2="454.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="137" x="49" y="449.0903">div: HTMLDivElement</text><polygon fill="#A80036" points="53,479.2891,43,483.2891,53,487.2891,49,483.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="47" x2="331" y1="483.2891" y2="483.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="59" y="478.2231">appendChild(div)</text><polygon fill="#A80036" points="524.5,508.4219,534.5,512.4219,524.5,516.4219,528.5,512.4219" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="337" x2="530.5" y1="512.4219" y2="512.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="344" y="507.356">promise.resolve(div)</text><polygon fill="#A80036" points="58,537.5547,48,541.5547,58,545.5547,54,541.5547" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="52" x2="535.5" y1="541.5547" y2="541.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="64" y="536.4888">document.createElement(...)</text><polygon fill="#A80036" points="524.5,566.6875,534.5,570.6875,524.5,574.6875,528.5,570.6875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="42" x2="530.5" y1="570.6875" y2="570.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="53" x="57" y="565.6216">element</text><polygon fill="#A80036" points="53,595.8203,43,599.8203,53,603.8203,49,599.8203" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="47" x2="540.5" y1="599.8203" y2="599.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="59" y="594.7544">div.appendChild(element)</text><!--MD5=[608dba72507439ad7b95ccce2dd3514b]
@startuml Extension-Adding-Panel

skinparam {
    backgroundColor #eee
}


box "localhost:8080\n" #LightBlue
participant browser as index.html
index.html -> index.js : "<script/>"
participant "@gots/es-runtime" as runtime
index.js -> runtime : ""api.loadExtension(url)""
activate runtime
end box

box "localhost:9091"
participant extension as extension
end box

runtime -> index.html : import(url)
runtime <- - index.html : //promise: Promise<module>//
deactivate runtime

== Download extension.js ==
index.html -> runtime : promise.resolve(module)

activate runtime
runtime -> runtime : activateExtension(module)
runtime -> extension : module.activate(api)
deactivate runtime
activate extension

extension -> runtime : ""api.addPanel()""
activate runtime
extension <- - runtime : //promise: Promise<div>//
deactivate extension

runtime -> index.html : document.createElement('div')
runtime <- - index.html : //div: HTMLDivElement//
runtime -> index.html : appendChild(div)
runtime -> extension : promise.resolve(div)
deactivate runtime

activate extension
extension -> index.html : document.createElement(...)
activate index.html
index.html - -> extension : //  element//
deactivate index.html
extension -> index.html : div.appendChild(element)
deactivate extension

@enduml

PlantUML version 1.2021.00(Sun Jan 10 02:25:05 PST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>